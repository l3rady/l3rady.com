<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="distribution" content="global"/>
<meta name="robots" content="follow, all"/>
<meta name="language" content="en"/>
<title>
Brady &raquo; Code and Snippets</title>
<meta name="generator" content="WordPress 3.9.9"/>
 
<link rel="shortcut icon" href="http://l3rady.com/blog/category/code-and-snippets/wp-content/favicon.ico" type="image/x-icon"/>
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="../../../feed/rss/index.html"/>
<link rel="alternate" type="text/xml" title="RSS .92" href="../../../feed/rss/index.html"/>
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="../../../feed/atom/index.html"/>
<link rel="pingback" href="../../../xmlrpc.php"/>
<link rel='archives' title='March 2011' href='../../2011/03/index.html'/>
<link rel='archives' title='January 2011' href='../../2011/01/index.html'/>
<link rel='archives' title='October 2010' href='../../2010/10/index.html'/>
<link rel='archives' title='September 2010' href='../../2010/09/index.html'/>
<link rel='archives' title='October 2009' href='../../2009/10/index.html'/>
<link rel='archives' title='September 2009' href='../../2009/09/index.html'/>
<link rel='archives' title='February 2009' href='../../2009/02/index.html'/>
<link rel='archives' title='October 2008' href='../../2008/10/index.html'/>
<link rel='archives' title='September 2008' href='../../2008/09/index.html'/>
<link rel='archives' title='August 2008' href='../../2008/08/index.html'/>
<link rel='archives' title='June 2008' href='../../2008/06/index.html'/>
<link rel='archives' title='May 2008' href='../../2008/05/index.html'/>
<link rel='archives' title='February 2008' href='../../2008/02/index.html'/>
<script type="text/javascript">//<![CDATA[
            // Google Analytics for WordPress by Yoast v4.3.5 | http://yoast.com/wordpress/google-analytics/
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-25211555-1']);
				            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
            //]]></script>
<link rel="alternate" type="application/rss+xml" title="Brady &raquo; Code and Snippets Category Feed" href="feed/index.html"/>
<link rel='stylesheet' id='mt-shcore-style-css' href='../../../wp-content/plugins/syntax-highlighter-mt/styles/shCore.css%3Fver=2.2.4.css' type='text/css' media='all'/>
<link rel='stylesheet' id='mt-theme-style-css' href='../../../wp-content/plugins/syntax-highlighter-mt/styles/shThemeDefault.css%3Fver=2.2.4.css' type='text/css' media='all'/>
<script type='text/javascript' src='../../../wp-content/plugins/syntax-highlighter-mt/scripts/shCore.js%3Fver=2.2.4'></script>
<script type='text/javascript' src='../../../wp-content/plugins/syntax-highlighter-mt/scripts/shAutoloader.js%3Fver=2.2.4'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc.php%3Frsd"/>
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml"/>
<meta name="generator" content="WordPress 3.9.9"/>
<link rel="StyleSheet" href="../../../wp-content/themes/alphaready/style/resetCSS.css" type="text/css"/>
<link rel="StyleSheet" href="../../../wp-content/themes/alphaready/style/alpha.css" type="text/css"/>
<!--[if lte IE 7.0]><link type="text/css" rel="stylesheet" href="/wp-content/themes/alphaready/style/alphaie7.css" /><![endif]-->
<!--[if lte IE 6.0]><link type="text/css" rel="stylesheet" href="/wp-content/themes/alphaready/style/alphaie6.css" /><![endif]-->
</head>
<body><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="l3rady.com",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
<div id="container">
<a href="../../../index.html"><img src="../../../wp-content/themes/alphaready/images/headerlogo.jpg" alt="Brady" title="Brady" border="0"/></a>
<div id="header-container">
<div id="slogan"><img src="../../../wp-content/themes/alphaready/images/slogan.png" alt="A moan, a groan, my life story and how me, a technically minded person just can&#039;t seem to fit in with anybody." title="A moan, a groan, my life story and how me, a technically minded person just can&#039;t seem to fit in with anybody."/></div>
<div id="nav-container">
<ul id="navigation">
<li class='home' id='selected'><a href="../../../index.html">HOME</a></li>
<li class='about'><a href="../../../about-me.html">ABOUT ME</a></li>
<li class='webmail'><a href="http://webmail.alphaready.com">WEBMAIL</a></li>
<li class='sms'><a href="http://sms.alphaready.com">SMS GATEWAY</a></li>
<li class='proxy'><a href="http://proxy.alphaready.com">PROXY</a></li>
</ul>
<a href="../../../cigarette.php.html"> </a>
</div>
</div>
<div id="content"> <div id="sidebar">
<ul id="ulside">
<li><h2 id="side01">ARCHIVES</h2>
<ul>
<li><a href='../../2011/03/index.html'>March 2011</a></li>
<li><a href='../../2011/01/index.html'>January 2011</a></li>
<li><a href='../../2010/10/index.html'>October 2010</a></li>
<li><a href='../../2010/09/index.html'>September 2010</a></li>
<li><a href='../../2009/10/index.html'>October 2009</a></li>
<li><a href='../../2009/09/index.html'>September 2009</a></li>
<li><a href='../../2009/02/index.html'>February 2009</a></li>
<li><a href='../../2008/10/index.html'>October 2008</a></li>
<li><a href='../../2008/09/index.html'>September 2008</a></li>
<li><a href='../../2008/08/index.html'>August 2008</a></li>
<li><a href='../../2008/06/index.html'>June 2008</a></li>
<li><a href='../../2008/05/index.html'>May 2008</a></li>
<li><a href='../../2008/02/index.html'>February 2008</a></li>
</ul>
</li>
<li><h2 id="side02">CATEGORIES</h2>
<ul>
<li class="cat-item cat-item-8 current-cat"><a href="index.html" title="View all posts filed under Code and Snippets">Code and Snippets</a> (14)
<ul class='children'>
<li class="cat-item cat-item-18"><a href="css/index.html" title="View all posts filed under CSS">CSS</a> (1)
</li>
<li class="cat-item cat-item-10"><a href="html/index.html" title="View all posts filed under HTML">HTML</a> (3)
</li>
<li class="cat-item cat-item-11"><a href="javascript/index.html" title="View all posts filed under JavaScript">JavaScript</a> (3)
</li>
<li class="cat-item cat-item-9"><a href="php/index.html" title="View all posts filed under PHP">PHP</a> (8)
</li>
</ul>
</li>
<li class="cat-item cat-item-16"><a href="../how-to/index.html" title="View all posts filed under How to">How to</a> (1)
</li>
<li class="cat-item cat-item-6"><a href="../inner-geek/index.html" title="Don&#039;t enter here if you want some lite reading. This place is purly my inner geek talking.">Inner Geek</a> (4)
</li>
<li class="cat-item cat-item-14"><a href="../software/index.html" title="View all posts filed under Software">Software</a> (2)
</li>
</ul>
</li>
<li><h2 id="side03">META</h2>
<ul>
<li><a href="http://feeds.feedburner.com/l3rady/WyQw" title="Syndicate this site using RSS"><abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="../../../wp-login.php.html">Log in</a></li>
</ul>
</li>
</ul>
</div>
<div class="arc"><h2>Archive for the 'Code and Snippets' Category</h2></div>
<div id="main-content">
<div class="entry">
 
<h3 class="entrytitle" id="post-530"><a href="../../../index.html%3Fp=530.html" rel="bookmark">Remove/edit WordPress admin footer links and version number</a></h3>
<div class="entrymeta">March 24th 2011 | Posted to <a href="php/index.html" title="View all posts in PHP" rel="category tag">PHP</a> </div>
<div class="entrybody"><pre class="brush:php">function change_footer_admin () {return '&amp;nbsp;';}
add_filter('admin_footer_text', 'change_footer_admin', 9999);
function change_footer_version() {return ' ';}
add_filter( 'update_footer', 'change_footer_version', 9999);</pre>
<p>Place the above code in your themes function file. The above code allows you to edit the admin footer version number and text links. Just alter the html in the return of each function. I recommend removing the version number for security reasons. There are a lot of tutorials out there that tell you how to remove the generator tag from your WordPress header to hide the version number put they forget if a user registers they can see the version number in the admin footer page. If you build WordPress installations for your clients this footer area is good for displaying your own support links etc.</p>
<p class="comments_link">
<a href="../../../index.html%3Fp=530.html#comments" title="Comment on Remove/edit WordPress admin footer links and version number"><span class="dsq-postid" rel="530 http://l3rady.com/?p=530"><img src="../../../wp-content/themes/alphaready/images/comments.gif" title="comments" alt="*"/> Comments(3)</span></a> </p>
</div>
 
</div>
<div class="entry">
 
<h3 class="entrytitle" id="post-523"><a href="../../../index.html%3Fp=523.html" rel="bookmark">How to stop Skype replacing telephone numbers on your web design</a></h3>
<div class="entrymeta">January 21st 2011 | Posted to <a href="css/index.html" title="View all posts in CSS" rel="category tag">CSS</a>,<a href="html/index.html" title="View all posts in HTML" rel="category tag">HTML</a> </div>
<div class="entrybody"><p>When a user installs Skype it auto installs some plugins to Internet Explorer and Firefox, that when it sees a telephone number on the webpage a user is viewing it will replace the number and surround it in its own formatting. Now a user can disable this function but as a web designer/developer you cannot guarantee that all your website visitors have it disabled. For those users that don’t have it disabled a nicely designed and placed telephone number in your design is replaced with an ugly and out-of-place number. Yuk! I did some searching and all the posts I could find only said how to disabled the plugin which I didn’t want. I want to disable the plugin or disable the effects of the plugin for all browsers viewing the site I was developing.</p>
<p>I then came across this code:</p>
<pre class="brush:html">&lt;meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE" /&gt;</pre>
<p>Put looks like Skype has updated and this code no longer works. For all my web design work I always work with a reset.css style sheet that is like my common settings for CSS that I use in all web development. Well I stumbled across some CSS you can use to hide the effects of the Skype plugin. Here is the nice bit of CSS code that has found its way into my reset.css style sheet:</p>
<pre class="brush:css">/**** GET LOST SKYPE! ****/
span.skype_pnh_container {display:none !important;}
span.skype_pnh_print_container {display:inline !important;}</pre>
<p>Hope it helps you out</p>
<p class="comments_link">
<a href="../../../index.html%3Fp=523.html#respond" title="Comment on How to stop Skype replacing telephone numbers on your web design"><span class="dsq-postid" rel="523 http://l3rady.com/?p=523"><img src="../../../wp-content/themes/alphaready/images/comments.gif" title="comments" alt="*"/> Comments(0)</span></a> </p>
</div>
 
</div>
<div class="entry">
 
<h3 class="entrytitle" id="post-499"><a href="../../../index.html%3Fp=499.html" rel="bookmark">WordPress &#8211; Show images attached to post or page in order</a></h3>
<div class="entrymeta">October 25th 2010 | Posted to <a href="php/index.html" title="View all posts in PHP" rel="category tag">PHP</a> </div>
<div class="entrybody"><p>I&#8217;m currently building a website where a custom post type needs to show a gallery of images per post. Below image is what I was after:</p>
<p><a href="../../../wp-content/uploads/2010/10/property-gallery.jpg"><img src="../../../wp-content/uploads/2010/10/property-gallery.jpg" alt="" title="property-gallery" width="535" height="256" class="alignnone size-full wp-image-500"/></a></p>
<p>To do this I would upload the images when creating the post so that the images would be attached to the post, or in other words the attachments where child posts of this post I was creating. I found some code that grabs the attachments but the code didn&#8217;t retrieve the results by the order I have specified in the upload manager when uploading the image. To get the images in order I had to write a little more code to what I had found.</p>
<p>Anyway here is the finished code <a href="http://pastebin.com/wEvW0WHZ" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://pastebin.com']);" target="_blank">http://pastebin.com/wEvW0WHZ</a>. It&#8217;s tailored to my needs but here you can see how the image attachments are being pulled and then how im sorting the results to go in the correct order. Hope it is some use to someone.</p>
<p class="comments_link">
<a href="../../../index.html%3Fp=499.html#respond" title="Comment on WordPress &#8211; Show images attached to post or page in order"><span class="dsq-postid" rel="499 http://l3rady.com/?p=499"><img src="../../../wp-content/themes/alphaready/images/comments.gif" title="comments" alt="*"/> Comments(0)</span></a> </p>
</div>
 
</div>
<div class="entry">
 
<h3 class="entrytitle" id="post-488"><a href="../../../index.html%3Fp=488.html" rel="bookmark">CSS/HTML &#8211; Margin goes/pushes out container block/div</a></h3>
<div class="entrymeta">September 30th 2010 | Posted to <a href="html/index.html" title="View all posts in HTML" rel="category tag">HTML</a> </div>
<div class="entrybody"><p>I recently encountered this issue:</p>
<p><img src="../../../wp-content/uploads/2010/09/marginout.png" alt="Margin Pushing Out"/></p>
<p>Where the margin on the H1 tag was overflowing into the container above and pushing down the H1 tag&#8217;s container. I couldnt figure out why. Here is an example:</p>
<p><a href="../../../wp-content/uploads/2010/09/marginout.html">http://l3rady.com/wp-content/uploads/2010/09/marginout.html</a></p>
<p>To my logic the green should be flush against the top and a 10px gap between the red and green. After some digging around I found out the reason this is happening is due to the way <a href="http://www.w3.org/TR/CSS2/visuren.html#block-formatting" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://www.w3.org']);">block formatting works</a>. To fix this just add overflow:hidden; to the H1 tag&#8217;s container. Fixed here:</p>
<p><a href="../../../wp-content/uploads/2010/09/marginfixed.html">http://l3rady.com/wp-content/uploads/2010/09/marginfixed.html</a></p>
<p class="comments_link">
<a href="../../../index.html%3Fp=488.html#comments" title="Comment on CSS/HTML &#8211; Margin goes/pushes out container block/div"><span class="dsq-postid" rel="488 http://l3rady.com/?p=488"><img src="../../../wp-content/themes/alphaready/images/comments.gif" title="comments" alt="*"/> Comments(1)</span></a> </p>
</div>
 
</div>
<div class="entry">
 
<h3 class="entrytitle" id="post-481"><a href="../../../index.html%3Fp=481.html" rel="bookmark">PHP Send Email With High Importance Set</a></h3>
<div class="entrymeta">September 29th 2010 | Posted to <a href="php/index.html" title="View all posts in PHP" rel="category tag">PHP</a> </div>
<div class="entrybody"><p>Just posting this for reference really. You need to add some extra headers to your PHP send mail script to send the email with high importance. This will show a red exclamation mark on the recipitents recieved mail if their mail client supports this feature.</p>
<p><a href="http://pastebin.com/UamEcsu7" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://pastebin.com']);" target="_blank">http://pastebin.com/UamEcsu7</a></p>
<p class="comments_link">
<a href="../../../index.html%3Fp=481.html#respond" title="Comment on PHP Send Email With High Importance Set"><span class="dsq-postid" rel="481 http://l3rady.com/?p=481"><img src="../../../wp-content/themes/alphaready/images/comments.gif" title="comments" alt="*"/> Comments(0)</span></a> </p>
</div>
 
</div>
<div class="entry">
 
<h3 class="entrytitle" id="post-477"><a href="../../../index.html%3Fp=477.html" rel="bookmark">Google Maps API Javascript V3 &#8211; Place Km/Mile radius/circle around point</a></h3>
<div class="entrymeta">September 14th 2010 | Posted to <a href="javascript/index.html" title="View all posts in JavaScript" rel="category tag">JavaScript</a> </div>
<div class="entrybody"><p>So Google has released V3 of their Google Maps API and it appears that they have stripped out a number of useful functions that I&#8217;ve found myself using in V2. Apparently these functions have been stripped out to make a more lightweight and compact API for better performance for mobile devices. This is great but now you have to write your own function that Google has taken out.</p>
<p>So would you like to draw a radius around on a point on a Google map? Well I do and I managed it in the V2 API using a Google function called distanceFrom() and some custom code but now that function has been stripped out in v3. Anyway I&#8217;ve rewritten my code to do this in the V3 API. Take a look: <a href="http://pastebin.com/DnLqzMZx" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://pastebin.com']);" target="_blank">http://pastebin.com/DnLqzMZx</a></p>
<p>This requires the Google Maps API and also the <a href="http://www.movable-type.co.uk/scripts/latlong.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://www.movable-type.co.uk']);" target="_blank">latlong JS script from Movable Type</a>. To use simply call the function drawCircle() sending your Google longitude and latitude cords and the mile radius. If you want to use Km then comment out or delete the bit of code highlighted.</p>
<p>Oh and you can send some other variables too if you don’t like the default colours and settings.</p>
<p>Example usage: <a href="../../../wp-content/uploads/2010/09/mapexample.html" target="_blank">http://l3rady.com/wp-content/uploads/2010/09/mapexample.html</a></p>
<p class="comments_link">
<a href="../../../index.html%3Fp=477.html#respond" title="Comment on Google Maps API Javascript V3 &#8211; Place Km/Mile radius/circle around point"><span class="dsq-postid" rel="477 http://l3rady.com/?p=477"><img src="../../../wp-content/themes/alphaready/images/comments.gif" title="comments" alt="*"/> Comments(0)</span></a> </p>
</div>
 
</div>
<div class="entry">
 
<h3 class="entrytitle" id="post-446"><a href="../../../index.html%3Fp=446.html" rel="bookmark">CSS Dotted/Dashed HR Style</a></h3>
<div class="entrymeta">October 13th 2009 | Posted to <a href="html/index.html" title="View all posts in HTML" rel="category tag">HTML</a> </div>
<div class="entrybody"><p>Ever had problems styling an HR element to be dotted or dashed and look correct in all browsers?</p>
<p>Well here is a simple solution for you:</p>
<p>[CSS]<br/>
hr.{<br/>
background-color:#fff;<br/>
border:#000 1px dotted;<br/>
border-style: none none dotted;<br/>
color:#fff;<br/>
}<br/>
[/CSS]</p>
<p class="comments_link">
<a href="../../../index.html%3Fp=446.html#comments" title="Comment on CSS Dotted/Dashed HR Style"><span class="dsq-postid" rel="446 http://l3rady.com/?p=446"><img src="../../../wp-content/themes/alphaready/images/comments.gif" title="comments" alt="*"/> Comments(1)</span></a> </p>
</div>
 
</div>
<div class="entry">
 
<h3 class="entrytitle" id="post-435"><a href="../../../index.html%3Fp=435.html" rel="bookmark">PHP &#8211; Get users SID from Active Directory via LDAP (objectsid)</a></h3>
<div class="entrymeta">September 15th 2009 | Posted to <a href="php/index.html" title="View all posts in PHP" rel="category tag">PHP</a> </div>
<div class="entrybody"><p>Have you ever needed to read an AD users SID so you can use it as the unique identifier it is?</p>
<p>Well I did but when I read out objectsid from AD for a user I found a load of weird symbols. It turned out that the data outputted was binary data. So after some digging around to see how to translate the binary data to a human readable SID like S-1-5-21-823795046-756116320-56781596-16683 I got to work to write a PHP script that could do just that.</p>
<p>This is what I came up with:</p>
<p>[PHP]$suffix =&#8221;@sub.mydomain.co.uk&#8221;;<br/>
$base_dn = &#8220;dc=sub,dc=mydomain,dc=co,dc=uk&#8221;;<br/>
$server = &#8220;127.0.0.1&#8243;;</p>
<p>$USERNAME = &#8220;username&#8221;;<br/>
$PASSWORD = &#8220;password&#8221;;</p>
<p>$USERNAMETOSEARCH = &#8220;user to get sid&#8221;;</p>
<p>$ds = ldap_connect($server);<br/>
ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3);<br/>
ldap_set_option($ds, LDAP_OPT_REFERRALS, 0);<br/>
$r = ldap_bind($ds, $USERNAME.$suffix, $PASSWORD);<br/>
$sr = ldap_search($ds, $base_dn, &#8220;(samaccountname=&#8221;.$USERNAMETOSEARCH.&#8221;)&#8221;);<br/>
$entries = ldap_get_entries($ds, $sr);</p>
<p>// All SID&#8217;s begin with S-<br/>
$sid = &#8220;S-&#8221;;<br/>
// Convert Bin to Hex and split into byte chunks<br/>
$sidinhex = str_split(bin2hex($entries[0]['objectsid'][0]), 2);<br/>
// Byte 0 = Revision Level<br/>
$sid = $sid.hexdec($sidinhex[0]).&#8221;-&#8221;;<br/>
// Byte 1-7 = 48 Bit Authority<br/>
$sid = $sid.hexdec($sidinhex[6].$sidinhex[5].$sidinhex[4].$sidinhex[3].$sidinhex[2].$sidinhex[1]);<br/>
// Byte 8 count of sub authorities &#8211; Get number of sub-authorities<br/>
$subauths = hexdec($sidinhex[7]);<br/>
//Loop through Sub Authorities<br/>
for($i = 0; $i < $subauths; $i++) {
	$start = 8 + (4 * $i);
	// X amount of 32Bit (4 Byte) Sub Authorities
	$sid = $sid.&#8221;-&#8221;.hexdec($sidinhex[$start+3].$sidinhex[$start+2].$sidinhex[$start+1].$sidinhex[$start]);
}

echo $sid;[/PHP]

Now this is written in PHP but I&#8217;m sure this code can be pretty much be translated to any other language.
</p>
        <p class="comments_link">
        <a href="../../../index.html%3Fp=435.html#comments" title="Comment on PHP &#8211; Get users SID from Active Directory via LDAP (objectsid)"><span class="dsq-postid" rel="435 http://l3rady.com/?p=435"><img src="../../../wp-content/themes/alphaready/images/comments.gif"  title="comments" alt="*" /> Comments(2)</span></a>        </p>
      </div>
      <!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://l3rady.com/blog/2009/09/15/php-get-users-sid-from-active-directory-via-ldap-objectsid/"
    dc:identifier="http://l3rady.com/blog/2009/09/15/php-get-users-sid-from-active-directory-via-ldap-objectsid/"
    dc:title="PHP &#8211; Get users SID from Active Directory via LDAP (objectsid)"
    trackback:ping="http://l3rady.com/blog/2009/09/15/php-get-users-sid-from-active-directory-via-ldap-objectsid/trackback/" />
</rdf:RDF>-->
    </div>
      <div class="entry">
      <!--<h2 class="entrydate">14 September 2009</h2>-->
      <h3 class="entrytitle" id="post-432"><a href="../../../index.html%3Fp=432.html" rel="bookmark">PHP &#8211; Active Directory &#8211; Reading UserAccountControl</a></h3>
      <div class="entrymeta">September 14th 2009 | Posted to <a href="php/index.html" title="View all posts in PHP" rel="category tag">PHP</a> </div>
      <div class="entrybody"><p>At the moment I&#8217;m doing a lot of work with Microsoft Active Directory and PHP. I&#8217;m building a few tools in PHP which reads data out of AD.</p>
<p>Now one of the things I wanted to read out was to see if the account was locked or if its password never expired. I couldn&#8217;t find these entries in AD but after searching those entries are stored in &#8220;useraccountcontrol&#8221;. But when I looked it was just a number. How does that number tell you if the account is locked?</p>
<p><a href="http://msdn.microsoft.com/en-us/library/ms680832(VS.85).aspx" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://msdn.microsoft.com']);">http://msdn.microsoft.com/en-us/library/ms680832(VS.85).aspx</a></p>
<p>On the above link is how that number is generated and once I understood that I got to work on writing a PHP script which translates that number into something more usable. Once I wrote the script I put it up on the Hot Scripts Forum to see if the code I wrote could be improved on and optimised. Here is what they came back with:</p>
<p>[PHP]<br />
$userAccountArray = array(<br />
  &#8216;ADS_UF_TRUSTED_TO_AUTHENTICATE_FOR_DELEGATION&#8217; => 0,<br />
  &#8216;ADS_UF_PASSWORD_EXPIRED&#8217; => 0,<br />
  &#8216;ADS_UF_DONT_REQUIRE_PREAUTH&#8217; => 0,<br />
  &#8216;ADS_UF_USE_DES_KEY_ONLY&#8217; => 0,<br />
  &#8216;ADS_UF_NOT_DELEGATED&#8217; => 0,<br />
  &#8216;ADS_UF_TRUSTED_FOR_DELEGATION&#8217; => 0,<br />
  &#8216;ADS_UF_SMARTCARD_REQUIRED&#8217; => 0,<br />
  &#8216;ADS_UF_MNS_LOGON_ACCOUNT&#8217; => 0,<br />
  &#8216;ADS_UF_DONT_EXPIRE_PASSWD&#8217; => 0,<br />
  &#8216;NOT_USED_8000&#8242; => 0,<br />
  &#8216;NOT_USED_4000&#8242; => 0,<br />
  &#8216;ADS_UF_SERVER_TRUST_ACCOUNT&#8217; => 0,<br />
  &#8216;ADS_UF_WORKSTATION_TRUST_ACCOUNT&#8217; => 0,<br />
  &#8216;ADS_UF_INTERDOMAIN_TRUST_ACCOUNT&#8217; => 0,<br />
  &#8216;ADS_UF_NORMAL_ACCOUNT&#8217; => 0,<br />
  &#8216;ADS_UF_TEMP_DUPLICATE_ACCOUNT&#8217; => 0,<br />
  &#8216;ADS_UF_ENCRYPTED_TEXT_PASSWORD_ALLOWED&#8217; => 0,<br />
  &#8216;ADS_UF_PASSWD_CANT_CHANGE&#8217; => 0,<br />
  &#8216;ADS_UF_PASSWD_NOTREQD&#8217; => 0,<br />
  &#8216;ADS_UF_LOCKOUT&#8217; => 0,<br />
  &#8216;ADS_UF_HOMEDIR_REQUIRED&#8217; => 0,<br />
  &#8216;NOT_USED_4&#8242; => 0,<br />
  &#8216;ADS_UF_ACCOUNTDISABLE&#8217; => 0,<br />
  &#8216;ADS_UF_SCRIPT&#8217; => 0<br />
);</p>
<p>function ADUserAccountControl($val) {<br />
	global $userAccountArray;<br />
	$x = pow(2, count($userAccountArray) &#8211; 1);<br />
	foreach($userAccountArray as $k => $v) {<br />
		if(($val &#8211; $x) >= 0){<br />
			$userAccountArray[$k] = 1;<br />
			$val -= $x;<br />
		} else {<br />
			$userAccountArray[$k] = 0;<br />
		}<br />
		$x = $x / 2;<br />
	}<br />
}<br />
[/PHP]</p>
<p>Simply pass your useraccountcontrol value to the function and read the results out of the array.</p>
        <p class="comments_link">
        <a href="../../../index.html%3Fp=432.html#respond" title="Comment on PHP &#8211; Active Directory &#8211; Reading UserAccountControl"><span class="dsq-postid" rel="432 http://l3rady.com/?p=432"><img src="../../../wp-content/themes/alphaready/images/comments.gif"  title="comments" alt="*" /> Comments(0)</span></a>        </p>
      </div>
      <!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://l3rady.com/blog/2009/09/14/php-active-directory-reading-useraccountcontrol/"
    dc:identifier="http://l3rady.com/blog/2009/09/14/php-active-directory-reading-useraccountcontrol/"
    dc:title="PHP &#8211; Active Directory &#8211; Reading UserAccountControl"
    trackback:ping="http://l3rady.com/blog/2009/09/14/php-active-directory-reading-useraccountcontrol/trackback/" />
</rdf:RDF>-->
    </div>
      <div class="entry">
      <!--<h2 class="entrydate">14 August 2008</h2>-->
      <h3 class="entrytitle" id="post-352"><a href="../../../index.html%3Fp=352.html" rel="bookmark">Javascript Same Height Div&#8217;s Update</a></h3>
      <div class="entrymeta">August 14th 2008 | Posted to <a href="javascript/index.html" title="View all posts in JavaScript" rel="category tag">JavaScript</a> </div>
      <div class="entrybody"><p>A while back I posted a way of making same height div’s but came across an issue when padding was involved. Well I’ve modified my code to take into account padding. Now the obvious thing to do would be to be to check padding on a div and subtract it from the height, but it’s not that easy. You would have to check three things: padding, paddingTop and paddingBottom. For some reason when I was checking padding I couldn’t get a value from JavaScript, this had me really stumped but after a nights sleep I came up with a better and more simpler way of sorting the padding issue. This is to let the code run and let it re-height the div’s and let the padding mess things up then run the same thing again and check for height differences from last time we checked. Oooohhh look the height has gone up 10px from last time thanks to a padding of 5px on the div. Now we know there is 10px of padding lets remove it. Sorted!</p>
<p>JavaScript Code:<br />
[js]<br />
function sameHeight(divs) // Bring in an array of your divs<br />
{<br />
var highest = 0;<br />
var heighttu = 0;<br />
for(i = 0; i < divs.length; i++) // Loop through the divs
{
// Check to see if this div is the highest?
if(document.getElementById(divs[i]).offsetHeight > highest)<br />
{<br />
// Yes its the highest so set the highest value to this div&#8217;s height<br />
highest = document.getElementById(divs[i]).offsetHeight;<br />
}<br />
}<br />
// Loop through divs and set their hieght all the same<br />
for(i = 0; i < divs.length; i++)
{
document.getElementById(divs[i]).style.height = highest+"px";
}
// now get offset hieght again and we may found we have gone higher this is because of padding
if(document.getElementById(divs[0]).offsetHeight > highest)<br />
{<br />
// correct the height<br />
highest = highest &#8211; (document.getElementById(divs[0]).offsetHeight &#8211; highest);<br />
// Correct divs<br />
for(i = 0; i < divs.length; i++)
{
document.getElementById(divs[i]).style.height = highest+&#8221;px&#8221;;
}
}
}[/js]
</p>
        <p class="comments_link">
        <a href="../../../index.html%3Fp=352.html#respond" title="Comment on Javascript Same Height Div&#8217;s Update"><span class="dsq-postid" rel="352 http://l3rady.com/?p=352"><img src="../../../wp-content/themes/alphaready/images/comments.gif"  title="comments" alt="*" /> Comments(0)</span></a>        </p>
      </div>
      <!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://l3rady.com/blog/2008/08/14/javascript-same-height-divs-update/"
    dc:identifier="http://l3rady.com/blog/2008/08/14/javascript-same-height-divs-update/"
    dc:title="Javascript Same Height Div&#8217;s Update"
    trackback:ping="http://l3rady.com/blog/2008/08/14/javascript-same-height-divs-update/trackback/" />
</rdf:RDF>-->
    </div>
    <div class="entryother"><a href="page/2/index.html" >Next Page &raquo;</a></div>
  </div>
  <br style="clear:right" />
<!-- begin footer -->
  </div>
</div>
<div id="footer">
  <p><a href="http://www.alphaready.com"><img src="../../../wp-content/themes/alphaready/images/ARfooter.jpg" alt="Alpha Ready" title="AlphavReady" border="0" /></a></p>
  <p>Copyright &copy; 2008-2015 <a href="http://www.alphaready.com">Alpha Ready Ltd</a>. All rights reserved.</p>
</div>
    <script type="text/javascript">
    // <![CDATA[
        var disqus_shortname = 'l3rady';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('rel'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) url = url[0];
                    else url = url[1]
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    //]]>
    </script>
<script type='text/javascript'>
/* <![CDATA[ */
var MTBrushParams = {"baseUrl":"http:\/\/l3rady.com\/wp-content\/plugins\/syntax-highlighter-mt"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/syntax-highlighter-mt/brushTypes.js%3Fver=2.2.4'></script>
</body>
</html>
<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using disk: enhanced
Object Caching 877/881 objects using disk

 Served from: l3rady.com @ 2015-12-30 23:29:30 by W3 Total Cache -->